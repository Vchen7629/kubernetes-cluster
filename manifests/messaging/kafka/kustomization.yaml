apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  # RBAC roles for each topic
  - rbac/category-classification-user.yaml
  - rbac/data-ingestion-user.yaml
  - rbac/post-embeddings-user.yaml
  - rbac/sentiment-analysis-user.yaml
  - rbac/topic-classification-user.yaml

  # network policies (egress)
  - network-policy/egress-to-host.yaml
  - network-policy/egress-to-kafka-brokers.yaml
  - network-policy/egress-to-kafka-operator.yaml
  - network-policy/egress-to-kube-dns.yaml
  - network-policy/egress-to-kubeapi-server.yaml

  # network policies (ingress)
  - network-policy/ingress-from-external.yaml
  - network-policy/ingress-from-kafka-cluster.yaml
  - network-policy/ingress-from-kafka-entity-operator.yaml
  - network-policy/ingress-from-kafka-exporter.yaml
  - network-policy/ingress-from-kafka.yaml
  - network-policy/ingress-from-kube-dns.yaml
  - network-policy/ingress-from-observability.yaml
  - network-policy/ingress-from-operator.yaml

  # kafka broker config
  - custom/cyphria-broker.yaml

  # kafka cluster config
  - custom/cyphria-cluster.yaml
  
  # topics config
  - custom/cyphria-aggregated-topic-dlq.yaml
  - custom/cyphria-aggregated-topic.yaml
  - custom/cyphria-raw-data-topic-dlq.yaml
  - custom/cyphria-raw-data-topic.yaml
  - custom/cyphria-sentence-embeddings-topic-dlq.yaml
  - custom/cyphria-sentence-embeddings-topic.yaml
  - custom/cyphria-topic-classification-topic-dlq.yaml
  - custom/cyphria-topic-classification-topic.yaml

  # observability (endpoint targets)
  - observability/kminion-monitor-scrape.yaml

  # observability (dashboards)
  - observability/kafka-cluster-dashboard.yaml
  - observability/kafka-consumer-group-dashboard.yaml
  - observability/kafka-topic-dashboard.yaml
